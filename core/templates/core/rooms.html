{% extends 'core/base.html' %}

{% block content %}
<h1 style="margin-bottom:15px;">ãƒ«ãƒ¼ãƒ ä¸€è¦§</h1>

<!-- ä¸Šéƒ¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ -->
<div style="
    margin-bottom:20px;
    display:flex;
    gap:15px;
    align-items:center;
">

    <!-- æ–°è¦ãƒ«ãƒ¼ãƒ ä½œæˆ -->
    <a href="{% url 'create_room' %}" style="
       padding:10px 14px;
       background:#4CAF50;
       color:white;
       text-decoration:none;
       border-radius:8px;
       font-weight:bold;
    ">
        ï¼‹ æ–°ã—ã„ãƒ«ãƒ¼ãƒ ã‚’ä½œã‚‹
    </a>

    <!-- å‚åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆç®¡ç†ï¼ˆä½œæˆè€…ã®ã¿ï¼‰ -->
    {% if has_requests %}
    <a href="{% url 'request_list' %}" style="
       padding:10px 14px;
       background:#ff9800;
       color:white;
       text-decoration:none;
       border-radius:8px;
       font-weight:bold;
    ">
        ğŸ”” å‚åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆ{{ request_count }}ï¼‰
    </a>
    {% endif %}
</div>

<!-- ãƒ«ãƒ¼ãƒ ä¸€è¦§ -->
<ul style="list-style:none; padding:0;">
{% for room in rooms %}
    <li style="
        padding:14px 16px;
        margin-bottom:12px;
        border:1px solid #ddd;
        border-radius:12px;
        background:#fafafa;
    ">

        <!-- ãƒ«ãƒ¼ãƒ å -->
        <div style="font-size:16px; font-weight:bold; color:#333;">
            ğŸ  {{ room.name }}
        </div>

        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div style="margin-top:8px;">

            {% if room.host == request.user %}
                <!-- ä½œæˆè€… -->
                <a href="{% url 'room_detail' room.id %}"
                   style="color:#2196F3; text-decoration:none;">
                    â–¶ ãƒ«ãƒ¼ãƒ ã«å…¥ã‚‹
                </a>

            {% elif room.id in approved_room_ids %}
                <!-- æ‰¿èªæ¸ˆã¿ -->
                <a href="{% url 'room_detail' room.id %}"
                   style="color:#2196F3; text-decoration:none;">
                    â–¶ ãƒ«ãƒ¼ãƒ ã«å…¥ã‚‹
                </a>

            {% elif room.id in requested_room_ids %}
                <!-- ç”³è«‹ä¸­ -->
                <span style="color:gray;">
                    â³ æ‰¿èªå¾…ã¡
                </span>

            {% else %}
                <!-- æœªç”³è«‹ -->
                <a href="{% url 'send_request' room.id %}"
                   style="color:#4CAF50; text-decoration:none; font-weight:bold;">
                    â• å‚åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹
                </a>
            {% endif %}

        </div>
    </li>
{% empty %}
    <li style="color:gray;">
        ã¾ã ãƒ«ãƒ¼ãƒ ãŒã‚ã‚Šã¾ã›ã‚“
    </li>
{% endfor %}
</ul>

<div style="margin-top:20px;">
    <a href="{% url 'home' %}" style="text-decoration:none;">
        â† ãƒ›ãƒ¼ãƒ ã¸
    </a>
</div>

{% endblock %}